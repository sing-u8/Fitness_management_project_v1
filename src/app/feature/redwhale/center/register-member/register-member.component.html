<section class="user-select-none thin-scroll-y-overlay2 ">
  <div class="header">
    <div class="header-text-container">
      <p class="rw-typo-headline1">새로운 회원님이 오셨군요! 👏</p>
      <p class="rw-typo-headline1">QR코드로 간편하게 회원을 등록해보세요.</p>
    </div>

    <div class="cg-typo-subtext close-button" rw-button rwButtonWidth="85" rwButtonHeight="40"
      rwButtonBorderColor="var(--font-color)" (click)="goDashboard()">
      <span class="mdi mdi-close"></span>
      <span>닫기</span>
    </div>
  </div>


  <div class="main thin-scroll-x-overlay2">

    <div class="main-inner-container">

      <div class="content-qrcode-container">

        <div class="qrcode-outer-container">

          <div class="qrcode-container">

            <div class='qrcode-title '>
              <span class="rw-typo-title2">신규 회원 등록</span>
              <div class="help">
                <img src="assets/icons/etc/help.svg">
                <div class="help-text-container">
                  <div class="help-text">
                  <div class="help-text-title">신규 회원 등록 방법</div>
                  <div class="help-text-content">
                    <div class="rw-typo-bodytext2">
                      <p>01</p> 회원님의 폰을 준비해주세요.
                    </div>
                    <div class="rw-typo-bodytext2">
                      <p>02</p> 회원님 폰의 카메라 어플을 켜 QR코드를 스캔해주세요.
                    </div>
                    <div class="rw-typo-bodytext2">
                      <p>03</p> 연결된 링크에서 회원가입 또는 로그인해주세요.
                    </div>
                    <div class="rw-typo-bodytext2">
                      <p>04</p>회원 등록이 완료되었어요!
                    </div>
                  </div>
                </div>
                </div>

              </div>

            </div>

            <div class="divider"></div>

            <div class="qrcode-box">
              <img src="assets/icons/etc/qrcode_edge.svg" class='left-top '>
              <img src="assets/icons/etc/qrcode_edge.svg" class='right-top rotate-90'>
              <img src="assets/icons/etc/qrcode_edge.svg" class='right-bottom rotate-180'>
              <img src="assets/icons/etc/qrcode_edge.svg" class='left-bottom rotate-270'>

              <canvas class="qrcode" #qrcode_canvas></canvas>
            </div>

            <a (click)="downloadGymQRcode($event)" class="download-button rw-typo-bodytext2">
              <img src="assets/icons/etc/download.svg">
              <canvas class="qrcode-for-download" #qrcode_canvas_download hidden></canvas>
              QR 다운로드
            </a>

          </div>

          <div class="direct-registration rw-typo-bodytext2">
            <p>QR코드 스캔이 어려운 회원이세요?</p>
            <p (click)="goDirectRegistration()" class="direct-registration-link">센터에서 직접 등록하기</p>

          </div>


        </div>
        <div class="content-container">
          <div *ngIf='isMemberDetail == false' class="content">

            <div class="content-header rw-typo-title2">
              오늘 등록한 회원
            </div>

            <div *ngIf='false' class="not-registered rw-typo-bodytext1">
              <img src="assets/icons/etc/empty_screen.svg" >
              <p>아직 등록한 회원이 없어요.</p>
            </div>

            <div *ngIf='registeredUserList.length > 0' class="new-members">
                <ng-template ngFor let-item [ngForOf]="registeredUserList" let-i=index>
                  <new-member-card
                    [cardIndex]="registeredUserList.length - i" [member]="item"
                    [memberLength]=registeredUserList.length
                    [registeredTime] = registeredUserTimeList[i].today
                    (sendMemberData)="onCardClick($event, registeredUserTimeList[i].fullTime)"
                  ></new-member-card>
                </ng-template>
            </div>

          </div>

          <div *ngIf="isMemberDetail == true" class="content">
            <div class="content-header rw-typo-title2">
              회원 정보
            </div>
            <div class="member-detail-box">
              <div class="member-avatar-card">
                <rw-avatar
                  [image] ="selectedMember.picture"
                  [text] ="selectedMember.center_user_name ?? selectedMember.name"
                  [backgroundColor] ="selectedMember.color"
                  size ="77"
                  fontSize ="25"
                ></rw-avatar>
                <div class="member-info">
                  <div class="name rw-typo-title2">{{selectedMember.center_user_name ?? selectedMember.name}}님</div>
                  <div class="registered-at rw-typo-subtext2">
                    {{selectedMemberAge}}
                    &nbsp;등록
                  </div>
                </div>
              </div>
              <div class="member-detail">
                <div class="detail-item">
                  <div class="category rw-typo-subtext2">회원번호</div>
                  <div class=" rw-typo-bodytext0">{{selectedMember.membership_number}}</div>
                </div>
                <div class="detail-item">
                  <div class="category rw-typo-subtext2">전화번호</div>
                  <div class=" rw-typo-bodytext0">{{selectedMember.phone_number}}</div>
                </div>
                <div class="detail-item">
                  <div class="category rw-typo-subtext2">이메일</div>
                  <div class=" rw-typo-bodytext0">{{selectedMember.email ? selectedMember.email : 'ㅡ'}}</div>
                </div>
                <div class="detail-item">
                  <div class="category rw-typo-subtext2">생년월일</div>
                  <div class=" rw-typo-bodytext0">{{selectedMember.birth_date ? getUserAge(selectedMember.birth_date) : 'ㅡ'}}</div>
                </div>
                <div class="detail-item">
                  <div class="category rw-typo-subtext2">성별</div>
                  <div class=" rw-typo-bodytext0">
                    {{selectedMember.sex == 'male' ?  '남성' : selectedMember.sex == 'female' ? '여성' : 'ㅡ' }}
                  </div>
                </div>
              </div>
              <div class="memo">
                <div class="rw-typo-subtext2">메모</div>
                <textarea
                  name = "member_memo"
                  (blur) = "onTextAreaBlur($event)"
                  placeholder="메모를 입력해주세요."
                  cols="30" rows="10"
                  class="rw-typo-bodytext1 thin-scroll-y-overlay2 thin-scroll-x-overlay2"
                >{{selectedMember.center_user_memo}}</textarea>
              </div>

              <div class="button-box">

                <div
                  class="back-button"
                  rw-button
                  rwButtonBorderColor="var(--border-color)"
                  rwButtonWidth="124"
                  rwButtonHeight="50"
                  (click) ="onBack()"
                >
                  <img src="assets/icons/etc/short_left_arrow_grey.svg" >
                  <span>돌아가기</span>
                </div>
                <div
                  class="allocate-loc-mem"
                  rw-button
                  rwButtonColor="var(--darkgrey)"
                  rwButtonWidth="365"
                  rwButtonHeight="50"
                  (click) = "allocateLockerAndMembership()"
                >
                  회원권/락커 배정하기
                </div>

              </div>

            </div>

          </div>

        </div>

      </div>

    </div>



  </div>

</section>


