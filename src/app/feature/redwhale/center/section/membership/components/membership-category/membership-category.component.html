<div class="category-container" >

  <div class="category-header">
    <div class="header-left" (click)= "toggleCategOpen()">
      <div class="mdi mdi-chevron-down" [class.open]="isCategOpen"></div>
      <span
        *ngIf="!isChangeNameOn" class="rw-typo-title1"
      >
        {{name}}
      </span>
      <input
        *ngIf="isChangeNameOn"
        rw-autoFocus
        (rwClickOutside) = "changeCategName()"
        (keyup.enter) = "changeCategName()"
        class="rw-input"
        [formControl]="categNameForm"
      >
      <span class="rw-typo-title1 item-length">{{items.length}}</span>
    </div>

    <div class="header-right">
      <img (click)="setDropdonwOpen($event)" src="assets/icons/etc/menu-vertical-grey.svg">
      <div
        class="dropdown"
        (rwClickOutside) = "setDropdonwClose();"
        [style.visibility] = "isDropdownOpen ? 'visible' : 'hidden'"
      >
        <div
          (click) =" onChangeName($event)"
          class="dropdown-item"
        >이름 변경</div>
        <div
          (click)="setCategDelModalOepn()"
          class="dropdown-item"
        >카테고리 삭제</div>
      </div>
    </div>
  </div>

  <div
    class="category-content"
    [class.categ-open] = 'isCategOpen'
  >
    <ng-template [ngIf] ="items.length != 0">
      <gm-membership-card
        *ngFor = "let item of items"
        [categItem] = "item"
        [categId] = "id"
        [centerId] = "centerId"
        [categName] = "name"
        [isIn] = "'category'"
      ></gm-membership-card>
    </ng-template>

    <div
      *ngIf="!isAddMembershipInputOn"
      class="add-item"
      (click) = "setAddMembershipItemOn($event)"
    >
      <img src="assets/icons/etc/plus-darkgrey.svg" />
      <span>회원권 추가</span>
    </div>
    <div
      *ngIf="isAddMembershipInputOn"
      class="add-item-container"
    >
      <input
        rw-autoFocus
        (rwClickOutside) = "addCategItem( newMembershipForm.value )"
        (keyup.enter) = "addCategItem( newMembershipForm.value )"
        [formControl]="newMembershipForm"
        class="rw-input add-item-input"
        type="text"
        placeholder="회원권명을 입력해주세요."
      >
      <img src="assets/icons/etc/plus-darkgrey.svg">
    </div>

  </div>
</div>

<rw-small-modal
  [(visible)] = "isCategDelOpen"
  [data] = "delModalData"
  (cancel) ="onDeleteCategoryCancel()"
  (confirm) ="onDeleteCategoryConfirm()"
></rw-small-modal>
