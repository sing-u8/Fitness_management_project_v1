<div class="community d-flex flex-column">
    <div class="header">
        <div class="title">
            <span class="rw-typo-subtext4">{{titleTime$ | async}}</span>
            <span class="rw-typo-title2">ê¸°íƒ€ ì¼ì •ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>
        </div>
        <div class="image-container">
            <img src="assets/icons/etc/close.svg" (click)="showCancelModal()" />
        </div>
    </div>
    
    <div class="content thin-scroll-y-overlay2">
        
        <div class="plan-and-detail-info">
            <p class="small-title">ì¼ì •ëª… / ìƒì„¸ ì •ë³´</p>
            <input
                class="plan-input rw-input"
                required
                placeholder="ì¼ì •ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."
                [(ngModel)]="planTexts.planTitle"
                #plan_title = ngModel
            >
            <textarea
                class="plan-textarea rw-textarea thin-scroll-y thin-scroll-x"
                placeholder="ì¼ì • ìƒì„¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì„ íƒ)"
                [(ngModel)]="planTexts.planDetail"
                #plan_detail = ngModel
            ></textarea>
        </div>
        
        <div class="assignee">
            <p class="small-title">ë‹´ë‹¹ì</p>
            <rw-multi-user-select
                [width]="'285'"
                [height]="'48'"
                [unCheckMode]="true"
                [items]="multiStaffSelect_list"
                [(ngModel)]="multiStaffSelectValue"
            ></rw-multi-user-select>
        </div>
        
        <div class="day-repeat">
            <p class="small-title">ë°˜ë³µ ì—¬ë¶€</p>
            <div class="day-repeat-button">
                <rw-switch
                    [text]="dayRepeatSwitch ? 'ë°˜ë³µí•¨' : 'ë°˜ë³µ ì•ˆ í•¨'"
                    [(ngModel)]="dayRepeatSwitch"
                ></rw-switch>
            </div>
        </div>
        
        <ng-container *ngIf="dayRepeatSwitch == false">
            <div class="date">
                <p class="small-title">ì¼ì</p>
                <div
                    class="date-pick-button"
                    (click) ="checkClickDatePickOutside($event); $event.stopPropagation()"
                >
                    
                    <span *ngIf="!datepick.date;else showDate" class="rw-typo-bodytext0">ì¼ìë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</span>
                    <ng-template #showDate>
                        <span class="rw-typo-bodytext0">{{datepick.date | dateFormat:'YYYY.MM.DD (dd)'}}</span>
                    </ng-template>
                    
                    <div
                        #datepicker
                        [class.display-none] = "!doShowDatepick"
                        (rwClickOutside) = "doShowDatepick = false"
                        class="datepicker"
                    >
                        <rw-datepicker2
                            mode="date"
                            [(data)]="datepick"
                            [shadowOn]="true"
                        ></rw-datepicker2>
                    </div>
                
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="dayRepeatSwitch == true">
            <div class="repeat-application-period">
                <p class="small-title">ë°˜ë³µ ì ìš© ê¸°ê°„</p>
                
                <div
                    class="datepicker"
                >
                    <div
                        class="date-pick-button"
                        rw-button rwButtonColor="var(--white)"
                        rwButtonFontColor="var(--font-color)"
                        (click) ="toggleShowRepeatDatePicker(); $event.stopPropagation()"
                    >
                        <p class="rw-typo-bodytext1 date-empty-text" *ngIf="!repeatDatepick.startDate && !repeatDatepick.endDate">
                            ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
                        </p>
                        <p *ngIf="(repeatDatepick.startDate && !repeatDatepick.endDate)" class="rw-typo-bodytext0-bold">
                            {{repeatDatepick.startDate | dateFormat:'YYYY.MM.DD'}} - <span class="rw-typo-bodytext1 date-empty-text">ì¢…ë£Œì¼ ì„ íƒ</span>
                        </p>
                        <p *ngIf="(!repeatDatepick.startDate && repeatDatepick.endDate)" class="rw-typo-bodytext0-bold">
                            <span class="rw-typo-bodytext1 date-empty-text">ì‹œì‘ì¼ ì„ íƒ</span> - {{repeatDatepick.endDate | dateFormat:'YYYY.MM.DD'}}
                        </p>
                        <p *ngIf="(repeatDatepick.startDate && repeatDatepick.endDate)" class="rw-typo-bodytext0-bold">
                            {{repeatDatepick.startDate | dateFormat:'YYYY.MM.DD'}} - {{repeatDatepick.endDate | dateFormat:'YYYY.MM.DD'}} ({{dayDiff}}ì¼)
                        </p>
                    
                    </div>
                    
                    <div
                        class="rw-datepicker"
                        #rw_datepicker
                        [class.display-none] = "!doShowRepeatDatePick"
                        (rwClickOutside) = "checkClickRepeatDatePickOutside($event);"
                    >
                        <db-datepicker
                            mode="multiline-component"
                            [(data)]="repeatDatepick"
                            (dataChange) = "onRepeatDatePickRangeChange()"
                        ></db-datepicker>
                    </div>
                
                </div>
            
            </div>
            
            <div class="repeat-day-of-week">
                <p class="small-title">ë°˜ë³µ ìš”ì¼</p>
                <rw-sch-day-repeat-select
                    [dayList]="repeatOfWeek"
                    (onDayChange)="onDayRepeatChange($event)"
                ></rw-sch-day-repeat-select>
            </div>
        </ng-container>
        
        
        <div class="time-select">
            
            <div class="start-time">
                <p class="small-title">ì‹œì‘ ì‹œê°„</p>
                <rw-time-picker2
                    [time] = "timepick.startTime"
                    [startTime]= "centerOperatingTime.start"
                    [endTime]= "centerOperatingTime.end"
                    width="135"
                    (onTimeClick)="onTimeClick($event, 'start')"
                ></rw-time-picker2>
            </div>
            <div class="end-time">
                <p class="small-title">ì¢…ë£Œ ì‹œê°„</p>
                <rw-time-picker2
                    [time] = "timepick.endTime"
                    [startTime]= "centerOperatingTime.start"
                    [endTime]= "centerOperatingTime.end"
                    [disableTimeUntil]= "timepick.startTime"
                    width="135"
                    (onTimeClick)="onTimeClick($event, 'end')"
                ></rw-time-picker2>
            </div>
        </div>
        
        <div
            class="save-button"
            rw-button
            rwButtonColor="var(--red)"
            [rwButtonDisabled]="!((!dayRepeatSwitch && plan_title.valid)
                            || (dayRepeatSwitch && repeatDatepick.startDate && repeatDatepick.endDate))"
            (click) = "((!dayRepeatSwitch && plan_title.valid)
                || (dayRepeatSwitch && repeatDatepick.startDate && repeatDatepick.endDate)) && showConfirmSaveModal()"
        >
            ì €ì¥í•˜ê¸°
        </div>
        
        <div class="detail">
            <span class="rw-typo-subtext0-regular">ê¸°íƒ€ ì¼ì •ì€ ìš´ì˜ì ë° ì§ì›ì—ê²Œë§Œ ë³´ì—¬ì§€ë©°,</span>
            <span class="rw-typo-subtext0-regular">íšŒì›ì—ê²ŒëŠ” ë³´ì—¬ì§€ì§€ ì•Šì•„ìš”. ğŸ™ˆ</span>
        </div>
    
    </div>
</div>



<rw-modal
    [(visible)]="doShowConfirmSaveModal"
    [data]="confirmModalText"
    (cancel)="hideConfirmSaveModal()"
    (confirm)="onConfirmSave()"
></rw-modal>


<rw-modal
    [(visible)]="doShowCancelModal"
    [data]="cancelModalText"
    (cancel)="hideCancelModal()"
    (confirm)="onCancelModalConfirm()"
></rw-modal>
